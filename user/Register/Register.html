<!DOCTYPE html>
<html lang="en">

<head>
    <title>GOGO | Register Page</title>
    <link rel="icon" type="image" href="../../image/GOGO.png">
    <link rel="stylesheet" href="Register.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=search" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <header>
        <div class="header-main">
            <a href="../MainPage/MainPage.html">
                <img src="../../image/gogoname.png" alt="GOGO Logo">
            </a>
            <form class="search-form">
                <div class="search">
                    <span class="search-icon material-symbols-outlined">search</span>
                    <input class="search-input" type="search" placeholder="Search">
                </div>
            </form>
        </div>

        <nav>
            <ul class="nav-links">
                <li><a href="../MainPage/MainPage.html">Menu</a></li>
                <li><a href="../AboutUs/AboutUs.html">About Lotus</a></li>
                <li><a href="CustomerService.html">Customer Service</a></li>
            </ul>
        </nav>
    </header>

    <div class="register">
        <form action="Register.php" method="POST" onsubmit="return validatePassword()">
            <div class="close">
                <a href="../HomePage/HomePage.html">
                    <i class='bx bx-x-circle'></i>
                </a>
            </div>

            <h1>Register gogo_supermarket</h1>
            <div class="divider"></div>
                        <h2>
                <img src="../../image/logoname(green).png" alt="GOGO Logo">
            </h2>

            <div class="input-box">
                <input type="text" name="username" placeholder="Username" required>
                <i class='bx bx-user left-icon'></i> <!-- 添加 left-icon 类 -->
            </div>
            
            <div class="input-box">
                <input type="tel" name="phone" placeholder="Phone Number" required>
                <i class='bx bxs-phone left-icon'></i>
            </div>
            
            <div class="input-box">
                <input type="email" name="email" placeholder="Email" required>
                <i class='bx bx-envelope left-icon'></i>
            </div>
            
            <div class="input-box">
                <input type="password" name="password" id="password" placeholder="Password" required>
                <i class='bx bx-lock-alt left-icon'></i>
                <i class='bx bx-hide show-hide'></i> <!-- 单独添加眼睛图标 -->
            </div>
            
            <div class="input-box">
                <input type="password" name="confirm_password" placeholder="Confirm Password" required>
                <i class='bx bx-lock-alt left-icon'></i>
                <i class='bx bx-hide show-hide'></i>
            </div>            

            <script>
                // JavaScript保持不变
                document.querySelectorAll('.show-hide').forEach(icon => {
                    icon.addEventListener('click', function() {
                        const input = this.previousElementSibling.previousElementSibling;
                        const isPassword = input.type === 'password';
                        
                        input.type = isPassword ? 'text' : 'password';
                        this.classList.toggle('bx-hide');
                        this.classList.toggle('bx-show');
                    });
                });
                </script>

            <!-- ✅ 在提交按钮前添加密码规则提示 -->
            <div class="password-rules" style="margin:15px 0; color:#666; font-size:12px; text-align:left;">
                <p>Password Requirements:</p>
                <ul style="list-style:none; padding-left:20px;">
                    <li>At least 8 characters</li>
                    <li>At least 1 special character (e.g., !@#$%^&*)</li>
                    <li>At least 1 number</li>
                    <li>At least 1 uppercase letter</li>
                </ul>
            </div>

            <button type="submit" class="btn">Create Account</button>

            <div class="additional-links">
                <p>Already have an account? <a href="../Login/Login.html">Login Now</a></p>
            </div>

            <script>
                function validatePassword() {
                  const password = document.getElementById('password').value;
                  const regex = /^(?=.*[!@#$%^&*]).{8,}$/;
                  if (!regex.test(password)) {
                    alert("Password must contain at least 1 special character and be at least 8 characters long！");
                    return false;
                  }
                  return true;
                }
            </script>
        </form>
    </div>

    <div class="footer-nav">
        <div class="footer-column">
            <h4>GOGO</h4>
            <ul>
                <li><a href="../AboutUs/AboutUs.html">About GOGO</a></li>
                <li><a href="#">Policies</a></li>
                <li><a href="../TermsConditions/TermsConditions.html">Terms & Conditions</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Support</h4>
            <ul>
                <li><a href="#">FAQs</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Legal</h4>
            <ul>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Anti-Bribery</a></li>
                <li><a href="#">Loyalty Program</a></li>
            </ul>
        </div>
    </div>
</body>

<script>
    const urlParams = new URLSearchParams(location.search);
    const error = urlParams.get('error');
    
    if(error === 'email_exists') {
        alert('Email already registered!');
    } else if(error === 'username_exists') {
        alert('Username already taken!');
    } else if(error === 'database_error') {
        alert('Registration failed. Please try again.');
    }
    </script>

</html>